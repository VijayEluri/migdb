<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Migdb : database migration" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>MigDB</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
	  <a id="forkme_banner_blog" href="http://mdsd.cs.felk.cvut.cz/">Check our blog!</a>
          <a id="forkme_banner" href="https://github.com/migdb/migdb">View on GitHub</a>

          <h1 id="project_title">MigDB</h1>
          <h2 id="project_tagline">Database Migration</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/migdb/migdb/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/migdb/migdb/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3>Welcome</h3>

<p>The vision of our project is to create a system which transforms the 
database model (and the database itself) on the basis of changes in the application 
model and that without loss of any data in the database (all at full operation).</p>

<p>From the one point of view, it is actually a automatization (evolution) of the 
object-relational mapping (The object-relational mapping is a common software development 
approach, which can speed up the creation of software).</p>

<p>Nowadays there are a lot of software applications, which are 
created using object-relation mapping (ORM), this approach speeds up the development a lot, 
on the other hand most of current ORM frameworks focus only at software creation, not on 
software evolution.</p>

<h3>Spuštění ukázkového příkladu</h3>

<p>Před vlastním spuštěním je třeba si připravit pracovní prostředí. Je nutné, 
aby byla aplikace testována pouze v operačních systémech Linux, nebo iOS. 
<a href="http://www.eclipse.org/downloads/packages/eclipse-modeling-tools/indigosr2" class="user-mention">Eclipse Modeling Tools</a> pro svůj 
chod potřebuje v systému podporu jazyka <a href="http://java.com/en/download/index.jsp" class="user-mention">JAVA</a>. 
Dále je třeba mít nainstalovanou podporu <a href="http://www.ruby-lang.org/en/downloads/" class="user-mention">Ruby</a>, 
pod kterým nám běží naše komunikující aplikace. Jako databázový 
systém jsme zvolili <a href="http://www.postgresql.org/download/" class="user-mention">PostgreSQL</a>, 
kterému jsme také přizpůsobili syntaxi generovaných SQL příkazů, proto je nutné mít 
nainstalovaný právě tento databázový systém.</p>

<p>Aby celý projekt fungoval, je třeba stáhnout projekt <a href="https://github.com/migdb/mwe-components" class="user-mention">mwe-components</a>, který 
  obsahuje sadu komponent pro pracovní tok aplikace.
</p>

<p>Po stažení obou repozitářů je třeba nahrát modely ze složky <code>plugins</code> do <code>eclipse/dropins/</code></p> 

<p>Nyní je třeba naimportovat všechny projekty do prostředí Eclipse.</p>

<p>Než pustíme pracovní toky, je třeba v každém spouštěcím mwe2 v projektu <code>migdb.run/src</code> změnit databázové
  informace komponenty CommandLineExec.
</p>
<pre><code>"ruby ../migdb.ruby.sql/script.rb output_sql_[mwe2] [database] [name] [pass]"
</code></pre>

<p>
  Nyní už se mohou sputit pracovní toky v pořadí <code>build</code>, <code>first</code> a <code>second</code>. Mezi
  <code>build</code> a <code>first</code> je třeba si vytvořenou databázi zaplnit testovacími daty. SQL s připravenou
  sadou dat je v souboru <code>cg.sql/insert.sql</code>
</p>

<h3>Výstupy</h3>
<h4>Sestavení modelu</h4>
<p>První pracovní tok sestavý ukázkový aplikační a databázový model. Jejich XMI podoby jsou v adresáři 
<code>migdb.run/output_xmi_build</code>. Aby jsme podle vygenerovaného modelu myhli vytvořit reálnou
databázi, vygenerovali jsem sadu SQL <code>migdb.run/output_sql_build</code></p>

<p>Vytvoříme situaci, kdy máme třídy <code>LegalPerson</code> a <code>NaturalPerson</code> zjevně
přetížené duplicitou kódu (adresní informace se nachází v obou tabulkách). </p>

<img src="images/build.jpg" alt="build model" style="width:315px; heigth:237px; left:150px" />

<h4>První transformace</h4>
<p>Druhý pracovní tok udělá první změny v aplikačním modelu. Aplikační i databázový model po změně je k
nahlédnutí v <code>migdb.run/output_xmi_first</code>. Vygenerovaná SQL pak v <code>migdb.run/output_sql_first</code>
</p>

<p>První úpravou je zbavení se duplicit ze tříd <code>LegalPerson</code> a <code>NaturalPerson</code> tím, že 
adresní informace přeneseme do společného předka <code>Party</code></p>.

<img src="images/first.jpg" alt="build model" style="width:355px; heigth:238px; left:130px" />

<h4>Druhá transformace</h4>
<p>Druhý pracovní tok zařídí poslední úpravy modelu. Aplikační a databázový model po úpravách jsou k nahlédnutí v 
<code>migdb.run/output_xmi_second</code>. Vygenerovaná SQL pak v <code>migdb.run/output_sql_second</code></p>

<p>První úpravou je zbavení se duplicit ze tříd <code>LegalPerson</code> a <code>NaturalPerson</code> tím, že 
adresní informace přeneseme do společného předka <code>Party</code></p>.

<img src="images/second.jpg" alt="build model" style="width:434px; heigth:277px; left:90px" />

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Migdb maintained by <a href="https://github.com/migdb">migdb</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
