library builder_app;
modeltype APP uses "http://www.collectionspro.eu/jam/mm/app";

/********************************************
 *				CLASS HELPERS			 	*
 ********************************************/

helper addPrimitiveClass(_name : String, _primitiveType : PrimitiveType) : APP::operations::AddPrimitiveClass {
	return object APP::operations::AddPrimitiveClass {
		name := _name;
		primitiveType := _primitiveType;
	}
}

helper addEmbeddedClass(_name : String) : APP::operations::AddEmbeddedClass {
	return object APP::operations::AddEmbeddedClass {
		name := _name;
	}
}

helper addClass(_name : String, _isAbstract : Boolean, _inheritanceType : InheritanceType) : APP::operations::AddClass {
	return object APP::operations::AddClass {
		name := _name;
		isAbstract := _isAbstract;
		inheritanceType := _inheritanceType;
	}
}

helper renameEntiry(_name : String, _newName : String) : APP::operations::RenameEntity {
	return object APP::operations::RenameEntity {
		name := _name;
		newName := _newName;
	}
}

helper removeEntiry(_name : String) : APP::operations::RemoveEntity {
	return object APP::operations::RemoveEntity {
		name := _name;
	}
}

/********************************************
 *			PROPERTY HELPERS			 	*
 ********************************************/

helper addProperty(_owningClassName : String, _name : String, _type : String) : APP::operations::AddProperty {
	return object APP::operations::AddProperty {
		owningClassName := _owningClassName;
		name := _name;
		type := _type;
	}
}

helper renameProperty(_owningClassName : String, _name : String, _newName : String) : APP::operations::RenameProperty {
	return object APP::operations::RenameProperty {
		owningClassName := _owningClassName;
		name := _name;
		newName := _newName;
	}
}

helper removeProperty(_owningClassName : String, _name : String) : APP::operations::RemoveProperty {
	return object APP::operations::RemoveProperty {
		owningClassName := _owningClassName;
		name := _name;
	}
}

/********************************************
 *				SET HELPERS				 	*
 ********************************************/

helper setOpposite(_firstClassName : String, _firstPropertyName : String, _secondClassName : String, _secondPropertyName : String, _isOpposite : Boolean) : APP::operations::SetOpposite {
	return object APP::operations::SetOpposite {
		firstClassName := _firstClassName;
		firstPropertyName := _firstPropertyName;
		secondClassName := _secondClassName;
		secondPropertyName := _secondPropertyName;
		isOpposite := _isOpposite;
	}
}

helper setAbstract(_name : String, _isAbstract : Boolean) : APP::operations::SetAbstract {
	return object APP::operations::SetAbstract {
		name := _name;
		isAbstract := _isAbstract;
	}
}

helper setParent(_name : String, _parentName : String, _properties : OrderedSet(String)) : APP::operations::SetParent {
	return object APP::operations::SetParent {
		name := _name;
		parentName := _parentName;
		properties := _properties;
	}
}

helper setType(_owningClassName : String, _name : String, _type : String) : APP::operations::SetType {
	return object APP::operations::SetType {
		owningClassName := _owningClassName;
		name := _name;
		type := _type;
	}
}

helper setBoundries(_owningClassName : String, _name : String, _lowerBound : Integer, _upperBound : Integer) : APP::operations::SetBoundries {
	return object APP::operations::SetBoundries {
		owningClassName := _owningClassName;
		name := _name;
		lowerBound := _lowerBound;
		upperBound := _upperBound;
	}
}

helper setOrdered(_owningClassName : String, _name : String, _isOrdered : Boolean) : APP::operations::SetOrdered {
	return object APP::operations::SetOrdered {
		owningClassName := _owningClassName;
		name := _name;
		isOrdered := _isOrdered;
	}
}

helper setUnique(_owningClassName : String, _name : String, _isUnique : Boolean) : APP::operations::SetUnique {
	return object APP::operations::SetUnique {
		owningClassName := _owningClassName;
		name := _name;
		isUnique := _isUnique;
	}
}

/********************************************
 *				COMPLEX HELPERS			 	*
 ********************************************/


helper copyProperty(_name : String, _targetClassName : String, _type : APP::operations::MergeType) : APP::operations::CopyProperty {
	return object APP::operations::CopyProperty {
		name := _name;
		targetClassName := _targetClassName;
		type := _type;
	}
}

helper moveProperty(_owningClassName : String, _name : String, _targetClassName : String, _type : APP::operations::MergeType) : APP::operations::MoveProperty {
	return object APP::operations::MoveProperty {
		owningClassName := _owningClassName;
		name := _name;
		targetClassName := _targetClassName;
		type := _type;
	}
}

helper extractClass(_sourceClassName : String, _extractPropertiesNames : OrderedSet(String), _extractClassName : String) : APP::operations::ExtractClass {
	return object APP::operations::ExtractClass {
		sourceClassName := _sourceClassName;
		extractPropertiesNames := _extractPropertiesNames;
		extractClassName := _extractClassName;
	}
}

/********************************************
 *				BUILD MODEL				 	*
 ********************************************/
helper _embeddedClass(_name : String, _properties : OrderedSet(Property)) : EmbeddedClass {
	return object EmbeddedClass{
		properties := _properties;
		name := _name;
	};
}

helper _property(_name : String, _type : Entity, _lowerBound : Integer, _upperBound : Integer) : Property {
 	return object Property {
 		name := _name;
 		type := _type;
 		lowerBound := _lowerBound;
 		upperBound := _upperBound;
 	}
}

helper _property(_name : String, _type : Entity, _lowerBound : Integer, _upperBound : Integer, _isID : Boolean) : Property {
 	return object Property {
 		name := _name;
 		type := _type;
 		lowerBound := _lowerBound;
 		upperBound := _upperBound;
 		isID := _isID;
 	}
}
 
helper _property(_name : String, _type : Entity) : Property {
 	return object Property {
 		name := _name;
 		type := _type;
 	}
}
 
helper _property(_name : String, _type : Entity, _isID : Boolean) : Property {
 	return object Property {
 		name := _name;
 		type := _type;
 		isID := _isID;
 		lowerBound := 1;
 		upperBound := 1;
 	}
}

helper _class(_name : String, _properties : OrderedSet(Property)) : Class {
 	return object Class {
 		name := _name;
 		properties := _properties;
 	}
}

helper _class(_name : String, _parent : Class, _properties : OrderedSet(Property)) : Class {
 	return object Class {
 		name := _name;
 		properties := _properties;
 		parent := _parent;
 	}
}
 
helper _primitiveClass(_name : String, _primitiveType : PrimitiveType) : PrimitiveClass {
 	return object PrimitiveClass {
 		name := _name;
 		primitiveType := _primitiveType;
 	}
}
